<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Admin Unifi√© - Wiki SGPI</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="toast.css">
    <style>
        /* Variables */
        :root {
            --sidebar-width: 260px;
            --header-height: 70px;
        }
        
        /* Layout */
        .admin-layout {
            display: flex;
            min-height: 100vh;
            background: var(--bg-primary);
        }
        
        /* Sidebar */
        .admin-sidebar {
            width: var(--sidebar-width);
            background: var(--bg-secondary);
            border-right: 1px solid var(--border);
            position: fixed;
            left: 0;
            top: 0;
            bottom: 0;
            overflow-y: auto;
            z-index: 100;
        }
        
        .admin-sidebar-header {
            padding: 24px;
            border-bottom: 1px solid var(--border);
        }
        
        .admin-sidebar-header h1 {
            margin: 0;
            font-size: 1.25rem;
            color: var(--accent);
        }
        
        .admin-sidebar-user {
            margin-top: 12px;
            padding: 12px;
            background: var(--bg-hover);
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .admin-sidebar-user-avatar {
            width: 40px;
            height: 40px;
            background: var(--accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }
        
        .admin-sidebar-user-info {
            flex: 1;
            overflow: hidden;
        }
        
        .admin-sidebar-user-name {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.9rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .admin-sidebar-user-role {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }
        
        .admin-nav {
            padding: 12px 0;
        }
        
        .admin-nav-section {
            margin-bottom: 24px;
        }
        
        .admin-nav-section-title {
            padding: 8px 24px;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
            font-weight: 600;
        }
        
        .admin-nav-item {
            padding: 12px 24px;
            display: flex;
            align-items: center;
            gap: 12px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }
        
        .admin-nav-item:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }
        
        .admin-nav-item.active {
            background: var(--bg-hover);
            color: var(--accent);
            border-left-color: var(--accent);
            font-weight: 600;
        }
        
        .admin-nav-icon {
            font-size: 1.25rem;
            width: 24px;
            text-align: center;
        }
        
        /* Main Content */
        .admin-main {
            margin-left: var(--sidebar-width);
            flex: 1;
            min-height: 100vh;
        }
        
        .admin-header {
            height: var(--header-height);
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border);
            padding: 0 32px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 50;
        }
        
        .admin-header-title {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin: 0;
        }
        
        .admin-header-actions {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        
        .admin-content {
            padding: 32px;
            max-width: 1400px;
        }
        
        /* Tab Content */
        .admin-tab {
            display: none;
        }
        
        .admin-tab.active {
            display: block;
            animation: fadeIn 0.3s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Cards */
        .card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .card-title {
            margin: 0;
            color: var(--text-primary);
            font-size: 1.25rem;
        }
        
        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }
        
        .stat-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .stat-icon {
            width: 60px;
            height: 60px;
            background: var(--bg-hover);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
        }
        
        .stat-content {
            flex: 1;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--accent);
            margin: 0;
        }
        
        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin: 0;
        }
        
        /* Buttons */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            font-size: 0.95rem;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: var(--accent);
            color: white;
        }
        
        .btn-primary:hover {
            filter: brightness(1.1);
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: var(--bg-hover);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }
        
        .btn-danger {
            background: #ef4444;
            color: white;
        }
        
        .btn-success {
            background: #10b981;
            color: white;
        }
        
        /* Form */
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 8px;
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 1rem;
        }
        
        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--accent);
        }
        
        /* List Items */
        .list-item {
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s;
        }
        
        .list-item:hover {
            border-color: var(--accent);
            background: var(--bg-hover);
        }
        
        .list-item-content {
            flex: 1;
        }
        
        .list-item-title {
            font-weight: 600;
            margin-bottom: 4px;
            color: var(--text-primary);
        }
        
        .list-item-meta {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }
        
        .list-item-actions {
            display: flex;
            gap: 8px;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 10000;
            align-items: center;
            justify-content: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: var(--bg-secondary);
            border-radius: 16px;
            padding: 32px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        
        .modal-header h2 {
            margin: 0;
            color: var(--text-primary);
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 2rem;
            cursor: pointer;
            color: var(--text-secondary);
            padding: 0;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
        }
        
        .modal-close:hover {
            background: var(--bg-hover);
        }
        
        .modal-footer {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            margin-top: 24px;
        }
        
        /* Search */
        .search-box {
            position: relative;
            margin-bottom: 24px;
        }
        
        .search-box input {
            width: 100%;
            padding: 12px 16px 12px 48px;
            border: 1px solid var(--border);
            border-radius: 8px;
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 1rem;
        }
        
        .search-box-icon {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.25rem;
            color: var(--text-secondary);
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }
        
        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 16px;
            opacity: 0.5;
        }
        
        /* Badge Selector */
        .badge-selector {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .badge-option {
            padding: 8px 16px;
            border: 2px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            background: var(--bg-primary);
        }
        
        .badge-option:hover {
            border-color: var(--accent);
        }
        
        .badge-option.selected {
            border-color: var(--accent);
            background: var(--accent);
            color: white;
        }
        
        /* Quick Add Textarea */
        .links-textarea {
            width: 100%;
            min-height: 300px;
            padding: 16px;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: 'Courier New', monospace;
            font-size: 0.95rem;
            line-height: 1.6;
            resize: vertical;
        }
        
        .counter {
            text-align: center;
            padding: 12px;
            background: var(--bg-hover);
            border-radius: 8px;
            color: var(--text-secondary);
            font-weight: 600;
            margin-top: 12px;
        }
        
        .counter.active {
            color: var(--accent);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .admin-sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s;
            }
            
            .admin-sidebar.open {
                transform: translateX(0);
            }
            
            .admin-main {
                margin-left: 0;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body class="dark-mode">

    <div class="admin-layout">
        
        <!-- Sidebar -->
        <aside class="admin-sidebar">
            <div class="admin-sidebar-header">
                <h1>üëë Admin Panel</h1>
                <div class="admin-sidebar-user">
                    <div class="admin-sidebar-user-avatar">A</div>
                    <div class="admin-sidebar-user-info">
                        <div class="admin-sidebar-user-name" id="admin-username">Admin</div>
                        <div class="admin-sidebar-user-role" id="admin-role">Super Admin</div>
                    </div>
                </div>
            </div>
            
            <nav class="admin-nav">
                <div class="admin-nav-section">
                    <div class="admin-nav-section-title">Vue d'ensemble</div>
                    <div class="admin-nav-item active" data-tab="dashboard">
                        <span class="admin-nav-icon">üìä</span>
                        <span>Tableau de bord</span>
                    </div>
                    <div class="admin-nav-item" data-tab="search">
                        <span class="admin-nav-icon">üîç</span>
                        <span>Recherche globale</span>
                    </div>
                </div>
                
                <div class="admin-nav-section">
                    <div class="admin-nav-section-title">Gestion du contenu</div>
                    <div class="admin-nav-item" data-tab="categories">
                        <span class="admin-nav-icon">üìÅ</span>
                        <span>Cat√©gories</span>
                    </div>
                    <div class="admin-nav-item" data-tab="sections">
                        <span class="admin-nav-icon">üìÇ</span>
                        <span>Sections</span>
                    </div>
                    <div class="admin-nav-item" data-tab="links">
                        <span class="admin-nav-icon">üîó</span>
                        <span>Liens</span>
                    </div>
                    <div class="admin-nav-item" data-tab="quick-add">
                        <span class="admin-nav-icon">‚ö°</span>
                        <span>Ajout rapide</span>
                    </div>
                </div>
                
                <div class="admin-nav-section">
                    <div class="admin-nav-section-title">Outils</div>
                    <div class="admin-nav-item" data-tab="import">
                        <span class="admin-nav-icon">üì•</span>
                        <span>Import CSV/Excel</span>
                    </div>
                    <div class="admin-nav-item" data-tab="export">
                        <span class="admin-nav-icon">üì§</span>
                        <span>Export & Backup</span>
                    </div>
                    <div class="admin-nav-item" data-tab="validation">
                        <span class="admin-nav-icon">‚úÖ</span>
                        <span>Validation liens</span>
                    </div>
                </div>
                
                <div class="admin-nav-section">
                    <div class="admin-nav-section-title">Administration</div>
                    <div class="admin-nav-item" data-tab="admins">
                        <span class="admin-nav-icon">üë•</span>
                        <span>Comptes admin</span>
                    </div>
                    <div class="admin-nav-item" data-tab="logs">
                        <span class="admin-nav-icon">üìã</span>
                        <span>Historique</span>
                    </div>
                    <div class="admin-nav-item" data-tab="settings">
                        <span class="admin-nav-icon">‚öôÔ∏è</span>
                        <span>Param√®tres</span>
                    </div>
                </div>
            </nav>
            
            <div style="padding: 24px; border-top: 1px solid var(--border);">
                <button class="btn btn-secondary" style="width: 100%;" onclick="logout()">
                    üö™ D√©connexion
                </button>
                <a href="index.html" class="btn btn-primary" style="width: 100%; margin-top: 8px; text-align: center; text-decoration: none;">
                    üè† Voir le wiki
                </a>
            </div>
        </aside>
        
        <!-- Main Content -->
        <main class="admin-main">
            <header class="admin-header">
                <h1 class="admin-header-title" id="current-page-title">Tableau de bord</h1>
                <div class="admin-header-actions">
                    <button id="theme-toggle" class="btn btn-secondary" aria-label="Changer de th√®me">
                        <span class="icon-sun">‚òÄÔ∏è</span>
                        <span class="icon-moon">üåô</span>
                    </button>
                </div>
            </header>
            
            <div class="admin-content">
                
                <!-- Tab: Dashboard -->
                <div class="admin-tab active" id="tab-dashboard">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">üìÅ</div>
                            <div class="stat-content">
                                <p class="stat-value" id="stat-categories">0</p>
                                <p class="stat-label">Cat√©gories</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üìÇ</div>
                            <div class="stat-content">
                                <p class="stat-value" id="stat-sections">0</p>
                                <p class="stat-label">Sections</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üîó</div>
                            <div class="stat-content">
                                <p class="stat-value" id="stat-links">0</p>
                                <p class="stat-label">Liens</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üë§</div>
                            <div class="stat-content">
                                <p class="stat-value" id="stat-users">0</p>
                                <p class="stat-label">Utilisateurs</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">üìà Activit√© r√©cente</h2>
                        </div>
                        <div id="recent-activity"></div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">üî• Cat√©gories les plus remplies</h2>
                        </div>
                        <div id="top-categories"></div>
                    </div>
                </div>
                
                <!-- Tab: Search -->
                <div class="admin-tab" id="tab-search">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">üîç Recherche globale</h2>
                        </div>
                        <div class="search-box">
                            <span class="search-box-icon">üîç</span>
                            <input type="text" id="global-search-input" placeholder="Rechercher dans toutes les cat√©gories, sections et liens..." />
                        </div>
                        <div id="search-results"></div>
                    </div>
                </div>
                
                <!-- Tab: Categories -->
                <div class="admin-tab" id="tab-categories">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">üìÅ Gestion des Cat√©gories</h2>
                            <button class="btn btn-primary" onclick="openCategoryModal()">‚ûï Nouvelle Cat√©gorie</button>
                        </div>
                        <div id="categories-list"></div>
                    </div>
                </div>
                
                <!-- Tab: Structure -->
                <div class="admin-tab" id="tab-sections">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">üèóÔ∏è Gestion de la Structure</h2>
                            <p style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 8px;">
                                G√©rez vos cat√©gories ‚Üí sous-cat√©gories ‚Üí sous-sous-cat√©gories
                            </p>
                        </div>
                        
                        <div class="form-group">
                            <label>Cat√©gorie</label>
                            <select id="structure-category-select" onchange="loadStructure()">
                                <option value="">-- Choisir une cat√©gorie --</option>
                            </select>
                        </div>
                        
                        <div id="structure-container" style="margin-top: 20px;"></div>
                    </div>
                </div>
                
                <!-- Tab: Links -->
                <div class="admin-tab" id="tab-links">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">üîó Gestion des Liens</h2>
                        </div>
                        <div class="form-group">
                            <label>Cat√©gorie</label>
                            <select id="link-category-select" onchange="loadSubCategoriesForLinks()">
                                <option value="">-- Choisir une cat√©gorie --</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Sous-cat√©gorie</label>
                            <select id="link-subcategory-select" onchange="loadSubSubCategoriesForLinks()" disabled>
                                <option value="">-- Choisir une sous-cat√©gorie --</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Sous-sous-cat√©gorie</label>
                            <select id="link-subsubcategory-select" onchange="loadLinksForSubSubCategory()" disabled>
                                <option value="">-- Choisir une sous-sous-cat√©gorie --</option>
                            </select>
                        </div>
                        <button class="btn btn-primary" onclick="openLinkModal()" id="add-link-btn" disabled>‚ûï Nouveau Lien</button>
                        <div id="links-list" style="margin-top: 20px;"></div>
                    </div>
                </div>
                
                <!-- Tab: Quick Add -->
                <div class="admin-tab" id="tab-quick-add">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">‚ö° Ajout Rapide de Liens</h2>
                        </div>
                        <form id="quick-add-form">
                            <div class="form-group">
                                <label>Cat√©gorie</label>
                                <select id="qa-category-select" required onchange="loadQASubCategories()">
                                    <option value="">-- S√©lectionner --</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Sous-cat√©gorie</label>
                                <select id="qa-subcategory-select" required disabled onchange="loadQASubSubCategories()">
                                    <option value="">-- S√©lectionner d'abord une cat√©gorie --</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Sous-sous-cat√©gorie</label>
                                <select id="qa-subsubcategory-select" required disabled>
                                    <option value="">-- S√©lectionner d'abord une sous-cat√©gorie --</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Liens (un par ligne)</label>
                                <textarea id="qa-links-input" class="links-textarea" placeholder="Nom | URL | Description | Badge" required></textarea>
                                <div class="counter" id="qa-link-counter">0 liens d√©tect√©s</div>
                                <small style="color: var(--text-secondary); margin-top: 8px; display: block;">
                                    Format: <code>Nom | URL</code> ou <code>Nom | URL | Description</code> ou <code>Nom | URL | Description | Badge</code>
                                </small>
                            </div>
                            <button type="submit" class="btn btn-success" id="qa-submit-btn">‚úÖ Ajouter tous les liens</button>
                        </form>
                    </div>
                </div>
                
                <!-- Tab: Import -->
                <div class="admin-tab" id="tab-import">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">üì• Import CSV/Excel</h2>
                        </div>
                        <p style="color: var(--text-secondary); margin-bottom: 20px;">
                            Importez plusieurs liens depuis un fichier CSV ou Excel
                        </p>
                        <div class="form-group">
                            <label>Fichier CSV/Excel</label>
                            <input type="file" id="import-file" accept=".csv,.xlsx,.xls" />
                        </div>
                        <button class="btn btn-primary" onclick="importFile()">üì§ Importer</button>
                        <div id="import-preview" style="margin-top: 20px;"></div>
                    </div>
                </div>
                
                <!-- Tab: Export -->
                <div class="admin-tab" id="tab-export">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">üì§ Export & Backup</h2>
                        </div>
                        
                        <h3 style="margin: 20px 0 12px 0; color: var(--text-primary);">Export Markdown</h3>
                        <div style="display: flex; gap: 12px; margin-bottom: 32px;">
                            <select id="export-md-category" style="flex: 1; padding: 12px; background: var(--bg-primary); border: 1px solid var(--border); border-radius: 8px; color: var(--text-primary);">
                                <option value="">-- S√©lectionner une cat√©gorie --</option>
                            </select>
                            <button class="btn btn-primary" onclick="exportMarkdown()">üì• T√©l√©charger .md</button>
                        </div>
                        
                        <h3 style="margin: 20px 0 12px 0; color: var(--text-primary);">Backup complet</h3>
                        <button class="btn btn-success" onclick="exportFullBackup()">üíæ T√©l√©charger backup JSON</button>
                        <p style="color: var(--text-secondary); margin-top: 8px; font-size: 0.9rem;">
                            Export complet de toutes les cat√©gories, sections et liens au format JSON
                        </p>
                    </div>
                </div>
                
                <!-- Tab: Validation -->
                <div class="admin-tab" id="tab-validation">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">‚úÖ Validation des liens</h2>
                        </div>
                        <p style="color: var(--text-secondary); margin-bottom: 20px;">
                            V√©rifiez si les liens sont toujours valides et accessibles
                        </p>
                        <button class="btn btn-primary" onclick="validateLinks()">üîç Lancer la validation</button>
                        <div id="validation-results" style="margin-top: 20px;"></div>
                    </div>
                </div>
                
                <!-- Tab: Admins -->
                <div class="admin-tab" id="tab-admins">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">üë• Comptes Admin</h2>
                            <button class="btn btn-primary" onclick="openAdminModal()">‚ûï Nouvel Admin</button>
                        </div>
                        <div id="admins-list"></div>
                    </div>
                </div>
                
                <!-- Tab: Logs -->
                <div class="admin-tab" id="tab-logs">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">üìã Historique des modifications</h2>
                            <button class="btn btn-secondary" onclick="loadLogs()">üîÑ Actualiser</button>
                        </div>
                        <div id="logs-list"></div>
                    </div>
                </div>
                
                <!-- Tab: Settings -->
                <div class="admin-tab" id="tab-settings">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">‚öôÔ∏è Param√®tres</h2>
                        </div>
                        <div class="form-group">
                            <label>Nom du wiki</label>
                            <input type="text" id="settings-wiki-name" value="Wiki SGPI" />
                        </div>
                        <div class="form-group">
                            <label>Description</label>
                            <textarea id="settings-wiki-description" rows="3">La plus grande collection de contenus gratuits francophones</textarea>
                        </div>
                        <button class="btn btn-primary" onclick="saveSettings()">üíæ Sauvegarder</button>
                    </div>
                </div>
                
            </div>
        </main>
    </div>

    <!-- ========================================= -->
    <!-- MODALS -->
    <!-- ========================================= -->
    
    <!-- Modal: Cat√©gorie -->
    <div class="modal" id="modal-category">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-category-title">Nouvelle Cat√©gorie</h2>
                <button class="modal-close" onclick="closeModal('modal-category')">√ó</button>
            </div>
            
            <form id="form-category" onsubmit="handleCategorySubmit(event)">
                <input type="hidden" id="category-id" />
                
                <div class="form-group">
                    <label>Emoji</label>
                    <input type="text" id="category-emoji" placeholder="üîí" maxlength="2" required />
                </div>
                
                <div class="form-group">
                    <label>Nom de la cat√©gorie</label>
                    <input type="text" id="category-name" placeholder="Ex: Confidentialit√© & S√©curit√©" required />
                </div>
                
                <div class="form-group">
                    <label>Slug (URL)</label>
                    <input type="text" id="category-slug" placeholder="Ex: confidentialite-securite" required />
                    <small style="color: var(--text-secondary);">Utilis√© dans l'URL (sans espaces ni accents)</small>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('modal-category')">Annuler</button>
                    <button type="submit" class="btn btn-primary">üíæ Sauvegarder</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Modal: Section -->
    <div class="modal" id="modal-section">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-section-title">Nouvelle Section</h2>
                <button class="modal-close" onclick="closeModal('modal-section')">√ó</button>
            </div>
            
            <form id="form-section" onsubmit="handleSectionSubmit(event)">
                <input type="hidden" id="section-id" />
                <input type="hidden" id="section-category-id" />
                
                <div class="form-group">
                    <label>Nom de la section</label>
                    <input type="text" id="section-name" placeholder="Ex: VPN & Proxies" required />
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('modal-section')">Annuler</button>
                    <button type="submit" class="btn btn-primary">üíæ Sauvegarder</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Modal: Sous-cat√©gorie -->
    <div class="modal" id="modal-subcategory">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-subcategory-title">Nouvelle Sous-cat√©gorie</h2>
                <button class="modal-close" onclick="closeModal('modal-subcategory')">√ó</button>
            </div>
            
            <form id="form-subcategory" onsubmit="handleSubCategorySubmit(event)">
                <input type="hidden" id="subcategory-id" />
                <input type="hidden" id="subcategory-category-id" />
                
                <div class="form-group">
                    <label>Nom de la sous-cat√©gorie</label>
                    <input type="text" id="subcategory-name" placeholder="Ex: Adblocking" required />
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('modal-subcategory')">Annuler</button>
                    <button type="submit" class="btn btn-primary">üíæ Sauvegarder</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Modal: Sous-sous-cat√©gorie -->
    <div class="modal" id="modal-subsubcategory">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-subsubcategory-title">Nouvelle Sous-sous-cat√©gorie</h2>
                <button class="modal-close" onclick="closeModal('modal-subsubcategory')">√ó</button>
            </div>
            
            <form id="form-subsubcategory" onsubmit="handleSubSubCategorySubmit(event)">
                <input type="hidden" id="subsubcategory-id" />
                <input type="hidden" id="subsubcategory-category-id" />
                <input type="hidden" id="subsubcategory-subcategory-id" />
                
                <div class="form-group">
                    <label>Nom de la sous-sous-cat√©gorie</label>
                    <input type="text" id="subsubcategory-name" placeholder="Ex: Filtres & Extensions" required />
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('modal-subsubcategory')">Annuler</button>
                    <button type="submit" class="btn btn-primary">üíæ Sauvegarder</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Modal: Lien -->
    <div class="modal" id="modal-link">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-link-title">Nouveau Lien</h2>
                <button class="modal-close" onclick="closeModal('modal-link')">√ó</button>
            </div>
            
            <form id="form-link" onsubmit="handleLinkSubmit(event)">
                <input type="hidden" id="link-id" />
                <input type="hidden" id="link-category-id" />
                <input type="hidden" id="link-section-id" />
                
                <div class="form-group">
                    <label>Nom du lien</label>
                    <input type="text" id="link-name" placeholder="Ex: NordVPN" required />
                </div>
                
                <div class="form-group">
                    <label>URL</label>
                    <input type="url" id="link-url" placeholder="https://..." required />
                </div>
                
                <div class="form-group">
                    <label>Description (optionnel)</label>
                    <textarea id="link-description" placeholder="Description courte du lien" rows="3"></textarea>
                </div>
                
                <div class="form-group">
                    <label>Badge (optionnel)</label>
                    <div class="badge-selector">
                        <div class="badge-option" data-badge="" onclick="selectBadge('')">Aucun</div>
                        <div class="badge-option" data-badge="‚≠ê" onclick="selectBadge('‚≠ê')">‚≠ê Recommand√©</div>
                        <div class="badge-option" data-badge="üî•" onclick="selectBadge('üî•')">üî• Essentiel</div>
                        <div class="badge-option" data-badge="üÜï" onclick="selectBadge('üÜï')">üÜï Nouveau</div>
                    </div>
                    <input type="text" id="link-badge" placeholder="Ou badge personnalis√©" style="margin-top: 12px;" />
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('modal-link')">Annuler</button>
                    <button type="submit" class="btn btn-primary">üíæ Sauvegarder</button>
                </div>
            </form>
        </div>
    </div>
    
    <script src="toast.js"></script>
    <script src="admin-unified.js"></script>
</body>
</html>
